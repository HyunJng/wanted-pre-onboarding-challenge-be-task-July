> 1. 동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.

이 문제는 동시성을 어떻게 처리할지에 관련한 문제이다.

## 동시성 문제란?
동일한 자원에 대해 **여러 스레드가 같은 소스에 동시에 접근**하면서 발생하는 문제이다.

> 문제상황 : A와 B가 모두 같은 소스에 저장하려는 상황

A유저와 B유저가 동시에 같은 계좌의 잔고에 변경이 일어나는 작업을 한다고 가정해 보자. A유저는 해당 계좌에 저축을 하고 B유저는 해당 계좌에서 다른 계좌로 이체를 한다. 이 경우 어느 한 명은 계좌의 잔고가 내가 예상한 것과 다르다는 것을 보게될 것이다.

이러한 동시성 문제의 중요한 것은 무조건 동시에 접근한다고 문제가 발생하는 것이 아니라 **값을 어딘가에서 변경할 때 발생**하게 된다. 즉, **읽기만 한다면 동시성 문제는 발생하지 않는다.**

## 동시성 문제 해결방법
**Lock**
이런 문제가 발생하지 않도록 하는 가장 단순한 방법은 한 쓰레드가 데이터에 접근하고 있을 때, 다른 쓰레드는 접근하지 못하도록 막는 것(Lock)이다. 그러나 이런 방법은 다른 문제점을 낳는다.

1. 동시성이 Lock은 trade-off관계이다. 동시성으로 빠른 연산처리를 가능하게 했고, Lock으로 얻은 격리성으로 안전한 transaction을 할 수 있다. 따라서 무작정 Lock처리를 하게되면 성능이 악화된다.
```
이러한 문제를 해결하기 위해 데이터마다 적절한 수준의 Lock을 설정해주어야한다.
예를 들어 일반 게시판 글과 같이 민감도가 낮은 데이터라면
격리성보다는 동시성을 높게 설정하고,
위의 예시처럼 계좌처럼 민감도가 높은 데이터라면
 격리성을 높게 설정하여 안정성을 강화한다.
```
3. 두 개 이상의 트랜잭션이 특정 자원의 Lock을 획득한 채 다른 트랜잭션이 소유하고 있는 잠금을 요구하면 아무리 기다려도 상황이 바뀌지 않는 상태(DeadLock)이 발생할 수 있다.
```
DeadLock은 빈도를 낮출 수는 방법이 있다.
- 트랜잭션을 자주 커밋한다.
- 정해진 순서로만 테이블에 접근한다.
```

